<html>
<head>
  <title>Straerry: Offline Knowledge Explorer</title>
  <meta http-equiv="Content-Security-Policy" content="default-src 'nonce-2726c7f26c' 'unsafe-eval'; script-src 'nonce-2726c7f26c' 'unsafe-eval'; script-src-elem 'nonce-2726c7f26c' 'unsafe-eval'; script-src-attr 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline';">
  <script nonce="2726c7f26c" src="./jquery-3.7.1.min.js"></script>
  <script nonce="2726c7f26c">
var UID = false;
    
function addScript( src ) {
  var s = document.createElement( 'script' );
  s.setAttribute( 'src', src );
  s.setAttribute( 'nonce', '2726c7f26c' );
  s.setAttribute( 'type', 'text/javascript' );
  var head = document.getElementsByTagName('head')[0];
  head.appendChild( s );
}
    
function show_uniqid() {
  alert('Showing uniqid');
  try {
    var link = $('#e-host').val();
    addScript(link);
    setTimeout('receive_uniqid()', 60 * 1000);
  } catch (e) {
    alert('[E] ' + e);
  }
}

function receive_uniqid() {
  if (UID != false) {
    mid = UID['uniqid'];
    alert('UID: ' + mid);
  } else {
    alert('Failed!');
  }
}

function check() {
  alert('Loaded');
  var url = location + '';
  $('#e-loc').text(url);
  var link = url;
  var pos = link.indexOf('/', 10);
  if (pos >= 0) {
    link = link.substring(0, pos);
  }
  pos = link.indexOf(':', 10);
  if (pos >= 0) {
    link = link.substring(0, pos);
  }
  link = link + ':1775/straerry/uniqid';
  $('#e-host').val(link);
}
  </script>
</head>
<body onload="check()" nonce="2726c7f26c">
  <input type="text" value="" id="e-host" />
  <input type="button" value="uniqid" onclick="show_uniqid()" nonce="2726c7f26c" />

  <p id="e-loc"></p>
</body>
</html>
