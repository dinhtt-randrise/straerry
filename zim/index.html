<html>
<head>
  <title>Straerry: Offline Knowledge Explorer</title>
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'sha384-oqVuAfXRKap7fdgcCY5uykM6+R9GqQ8K/uxy9rx7HNQlGYl1kPzQho1wx4JwY8wC'; style-src 'self' 'unsafe-inline';">
  <script crossorigin="anonymous" integrity="sha384-oqVuAfXRKap7fdgcCY5uykM6+R9GqQ8K/uxy9rx7HNQlGYl1kPzQho1wx4JwY8wC" src="./jquery-3.7.1.min.js"></script>
  <script>
var UID = false;
    
function addScript( src ) {
  var s = document.createElement( 'script' );
  s.setAttribute( 'src', src );
  s.setAttribute( 'integrity', 'sha384-oqVuAfXRKap7fdgcCY5uykM6+R9GqQ8K/uxy9rx7HNQlGYl1kPzQho1wx4JwY8wC' );
  s.setATtribute( 'crossorigin', 'anonymous' );
  document.body.appendChild( s );
}
    
function show_uniqid() {
  alert('Showing uniqid');
  try {
    var link = $('#e-host').val();
    addScript(link);
    setTimeout('receive_uniqid()', 60 * 1000);
  } catch (e) {
    alert('[E] ' + e);
  }
}

function receive_uniqid() {
  if (UID != false) {
    mid = UID['uniqid'];
    alert('UID: ' + mid);
  } else {
    alert('Failed!');
  }
}

function check() {
  alert('Loaded');
  var url = location + '';
  $('#e-loc').text(url);
  var link = url;
  var pos = link.indexOf('/', 10);
  if (pos >= 0) {
    link = link.substring(0, pos);
  }
  pos = link.indexOf(':', 10);
  if (pos >= 0) {
    link = link.substring(0, pos);
  }
  link = link + ':1775/straerry/uniqid';
  $('#e-host').val(link);
}
  </script>
</head>
<body onload="check()">
  <input type="text" value="" id="e-host" />
  <input type="button" value="uniqid" onclick="show_uniqid()" />

  <p id="e-loc"></p>
</body>
</html>
